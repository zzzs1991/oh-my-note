### Linux性能优化实战

#### 开篇词

##### 带着问题学习

1. 解决问题
 - 了解少数几个系统组件的基本原理
 - 掌握基本性能指标和工具
 - 性能优化的常用技巧
2. 回头去啃经典书籍

##### 内容
1. CPU性能
2. 磁盘IO性能
3. 内存性能
4. 网络性能
##### 模式
1. 基础
2. 案例
3. 套路
4. 答疑

#### 1. 如何学习Linux性能优化
##### 路径
1. 理解应用程序和系统的少数几个基本原理
2. 大量实战练习
3. 建立整体性能的全局观
##### 性能指标是什么
高并发、响应快 --> 吞吐、延时 --> 应用负载的视角 --> 系统资源的视角 --> 资源使用率、饱和度

1. 应用负载
2. 系统资源

1. Applications
2. Libraries
3. System Call
4. Linux Kernel
5. Device

`性能问题的本质: 系统资源达到瓶颈`
找出和避免、缓解它们，从而更高效的利用系统资源去处理更多的请求。

##### 性能分析的六个步骤
1. 选择指标评估应用程序和系统的性能
2. 为应用程序和系统设置性能目标
3. 进行系统基准测试
4. 性能分析定位瓶颈
5. 优化系统和应用程序
6. 性能监控和告警

##### 技巧
1. 刚开始不要试图抓住所有实现细节
2. 边学边实践
3. 勤思考，多反思，善总结

#### 2. 基础-到底怎么理解平均负载
##### 平均负载
uptime命令的输出
`10:11:51 up 10 min,  5 users,  load average: 1.69, 0.72, 0.33`
当前时间 - 系统运行时间 - 1分钟、5、15分钟的平均负载

平均负载: 单位时间内，系统处于`可运行状态`和`不可中断状态`的平均进程数
1. 可运行状态
   正在使用CPU或者正在等待使用CPU的进程
   ps命令处于 R状态的进程
     - Running
     - Runnable
2. 不可中断状态
   处于内核关键流程中的进程，这些流程不可打断
   等待硬件设备的I/O响应，ps命令中的D状态
   `不可中断状态实际上是系统对进程和硬件设备的一种保护机制`
最理想状态 每个CPU上刚好运行着一个进程
##### 平均负载和CPU使用率
平均负载和CPU使用率并不一定完全一致
1. CPU密集型进程 一致
2. I/O密集型进程 平均负载高,CPU使用率不一定高
3. 大量等待CPU的进程调度 也会导致平均负载升高,此时的CPU使用率也会比较高
   

      










